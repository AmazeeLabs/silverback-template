{
  "extends": ["//"],
  "pipeline": {
    "dev": {
      "persistent": true,
      "dependsOn": ["@custom/cms#build", "prep", "^prep"]
    },
    "dev:light": {
      "notes": "Same as dev, but does not build the CMS",
      "persistent": true,
      "dependsOn": ["prep", "^prep"]
    },
    "prep": {
      "outputs": ["src/gatsby-fragments.js", "styles.css"]
    },
    "test:static": {
      "inputs": ["src/**", "!src/gatsby-fragments.js"]
    },
    "rebuild": {
      "cache": false,
      "dependsOn": ["prep", "^prep"],
      "inputs": [
        "gatsby-browser.js",
        "gatsby-config.js",
        "gatsby-node.ts",
        "netlify/**",
        "netlify.toml"
      ]
    },
    "build": {
      "env": ["DRUPAL_INTERNAL_URL", "DRUPAL_EXTERNAL_URL"],
      "dependsOn": ["@custom/cms#build", "prep", "^build"],
      "inputs": [
        "gatsby-browser.js",
        "gatsby-config.js",
        "gatsby-node.ts",
        "netlify/**",
        "netlify.toml"
      ],
      "outputs": ["public/**", ".cache/**", ".env"]
    }
  }
}
