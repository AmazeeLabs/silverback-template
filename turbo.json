{
  "$schema": "https://turborepo.org/schema.json",
  "pipeline": {
    "start": {
      // Start the package or application locally. Has to be integrated
      // first. Pre-requisite for integration tests.
      "cache": false,
      "dependsOn": ["integrate"]
    },
    "integrate": {
      // An apps "integrate" task depends on its own build step.
      // Brings a package into a state to be "start"ed.
      "dependsOn": ["build"]
    },
    "build": {
      // A package's `build` script depends on that package's
      // dependencies and devDependencies
      // `build` tasks  being completed first
      // (the `^` symbol signifies `upstream`).
      "dependsOn": ["^build"],
      // By default, the build task will produce a "build" folder
      // in the packages directory.
      "outputs": ["build/**"],
      "inputs": ["src/**"]
    },
    "test:static": {
      // Static tests don't require a build of the package, but they
      // require dependencies to be built, since these might contain
      // type definitions.
      "dependsOn": ["^build"],
      "inputs": ["src/**"]
    },
    "test:unit": {
      // Unit tests also don't require the package to be built since test
      // tools build packages on the fly. Dependencies need to be built though.
      // Also unit tests should not even run without static tests passing or
      // dependencies unit tests failing.
      "dependsOn": ["^build", "test:static", "^test:unit"],
      "outputs": [],
      // Unit tests only have to be re-run when something in the "src"
      // folder changes.
      "inputs": ["src/**"]
    },
    "test:integration": {
      // Integration tests run the full system and require the package to be
      // built and unit tested.
      "dependsOn": ["integrate", "test:unit"],
      "outputs": [],
      // Integration tests only have to be re-run when something in the "src"
      // folder changes.
      "inputs": ["src/**"]
    }
  }
}
