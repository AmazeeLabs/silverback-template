<?php

/**
 * @file
 * Provides a route for splitting the entity creation in two steps: first for
 * the mandatory fields and a second one, which is actually the edit form, for
 * the rest of the fields.
 */

use Drupal\Core\Entity\ContentEntityType;
use Drupal\Core\Entity\EntityInterface;

/**
 * Implements hook_entity_type_build().
 */
function entity_create_split_entity_type_build(array &$entity_types) {
  foreach ($entity_types as $entity_type) {
    if ($entity_type instanceof ContentEntityType) {
      $entity_type->setFormClass('split', $entity_type->getFormClass('default'));
    }
  }
}

/**
 * Implements hook_gutenberg_enabled().
 */
function entity_create_split_gutenberg_enabled(EntityInterface $entity) {
  if (isset($entity->disableGutenberg) && $entity->disableGutenberg === TRUE) {
    return FALSE;
  }
}
